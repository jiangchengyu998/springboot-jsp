<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.etc.dao.CommodityDao">
  <resultMap id="BaseResultMap" type="com.etc.entity.Commodity">
    <id column="cid" jdbcType="INTEGER" property="cid" />
    <result column="cinfo" jdbcType="VARCHAR" property="cinfo" />
    <result column="cprice" jdbcType="INTEGER" property="cprice" />
    <result column="cname" jdbcType="VARCHAR" property="cname" />
    <result column="cnum" jdbcType="INTEGER" property="cnum" />
    <result column="crelease" jdbcType="TIMESTAMP" property="crelease" />
    <result column="ccertification" jdbcType="VARCHAR" property="ccertification" />
    <result column="clocation" jdbcType="VARCHAR" property="clocation" />
    <result column="uid" jdbcType="INTEGER" property="uid" />
    <result column="cimage" jdbcType="VARCHAR" property="cimage" />
    <result column="ctel" jdbcType="VARCHAR" property="ctel" />
    <result column="cqqorweixin" jdbcType="VARCHAR" property="cqqorweixin" />
    <result column="cclassification" jdbcType="VARCHAR" property="cclassification" />
    <result column="truename" jdbcType="VARCHAR" property="truename" />
    <result column="cschool" jdbcType="VARCHAR" property="cschool" />
    <result column="oid" jdbcType="INTEGER" property="oid" />
    <result column="clicks" jdbcType="INTEGER" property="clicks" />
    <result column="saleid" jdbcType="INTEGER" property="saleid" />
  </resultMap>
  <sql id="Base_Column_List">
    cid, cinfo, cprice, cname, cnum, crelease, ccertification, clocation, uid, cimage, 
    ctel, cqqorweixin, cclassification, truename, cschool, oid, clicks, saleid
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from commodity
    where cid = #{cid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from commodity
    where cid = #{cid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.etc.entity.Commodity">
    insert into commodity (cid, cinfo, cprice, 
      cname, cnum, crelease, 
      ccertification, clocation, uid, 
      cimage, ctel, cqqorweixin, 
      cclassification, truename, cschool, 
      oid, clicks, saleid
      )
    values (#{cid,jdbcType=INTEGER}, #{cinfo,jdbcType=VARCHAR}, #{cprice,jdbcType=INTEGER}, 
      #{cname,jdbcType=VARCHAR}, #{cnum,jdbcType=INTEGER}, #{crelease,jdbcType=TIMESTAMP}, 
      #{ccertification,jdbcType=VARCHAR}, #{clocation,jdbcType=VARCHAR}, #{uid,jdbcType=INTEGER}, 
      #{cimage,jdbcType=VARCHAR}, #{ctel,jdbcType=VARCHAR}, #{cqqorweixin,jdbcType=VARCHAR}, 
      #{cclassification,jdbcType=VARCHAR}, #{truename,jdbcType=VARCHAR}, #{cschool,jdbcType=VARCHAR}, 
      #{oid,jdbcType=INTEGER}, #{clicks,jdbcType=INTEGER}, #{saleid,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.etc.entity.Commodity">
    insert into commodity
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="cid != null">
        cid,
      </if>
      <if test="cinfo != null">
        cinfo,
      </if>
      <if test="cprice != null">
        cprice,
      </if>
      <if test="cname != null">
        cname,
      </if>
      <if test="cnum != null">
        cnum,
      </if>
      <if test="crelease != null">
        crelease,
      </if>
      <if test="ccertification != null">
        ccertification,
      </if>
      <if test="clocation != null">
        clocation,
      </if>
      <if test="uid != null">
        uid,
      </if>
      <if test="cimage != null">
        cimage,
      </if>
      <if test="ctel != null">
        ctel,
      </if>
      <if test="cqqorweixin != null">
        cqqorweixin,
      </if>
      <if test="cclassification != null">
        cclassification,
      </if>
      <if test="truename != null">
        truename,
      </if>
      <if test="cschool != null">
        cschool,
      </if>
      <if test="oid != null">
        oid,
      </if>
      <if test="clicks != null">
        clicks,
      </if>
      <if test="saleid != null">
        saleid,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="cid != null">
        #{cid,jdbcType=INTEGER},
      </if>
      <if test="cinfo != null">
        #{cinfo,jdbcType=VARCHAR},
      </if>
      <if test="cprice != null">
        #{cprice,jdbcType=INTEGER},
      </if>
      <if test="cname != null">
        #{cname,jdbcType=VARCHAR},
      </if>
      <if test="cnum != null">
        #{cnum,jdbcType=INTEGER},
      </if>
      <if test="crelease != null">
        #{crelease,jdbcType=TIMESTAMP},
      </if>
      <if test="ccertification != null">
        #{ccertification,jdbcType=VARCHAR},
      </if>
      <if test="clocation != null">
        #{clocation,jdbcType=VARCHAR},
      </if>
      <if test="uid != null">
        #{uid,jdbcType=INTEGER},
      </if>
      <if test="cimage != null">
        #{cimage,jdbcType=VARCHAR},
      </if>
      <if test="ctel != null">
        #{ctel,jdbcType=VARCHAR},
      </if>
      <if test="cqqorweixin != null">
        #{cqqorweixin,jdbcType=VARCHAR},
      </if>
      <if test="cclassification != null">
        #{cclassification,jdbcType=VARCHAR},
      </if>
      <if test="truename != null">
        #{truename,jdbcType=VARCHAR},
      </if>
      <if test="cschool != null">
        #{cschool,jdbcType=VARCHAR},
      </if>
      <if test="oid != null">
        #{oid,jdbcType=INTEGER},
      </if>
      <if test="clicks != null">
        #{clicks,jdbcType=INTEGER},
      </if>
      <if test="saleid != null">
        #{saleid,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.etc.entity.Commodity">
    update commodity
    <set>
      <if test="cinfo != null">
        cinfo = #{cinfo,jdbcType=VARCHAR},
      </if>
      <if test="cprice != null">
        cprice = #{cprice,jdbcType=INTEGER},
      </if>
      <if test="cname != null">
        cname = #{cname,jdbcType=VARCHAR},
      </if>
      <if test="cnum != null">
        cnum = #{cnum,jdbcType=INTEGER},
      </if>
      <if test="crelease != null">
        crelease = #{crelease,jdbcType=TIMESTAMP},
      </if>
      <if test="ccertification != null">
        ccertification = #{ccertification,jdbcType=VARCHAR},
      </if>
      <if test="clocation != null">
        clocation = #{clocation,jdbcType=VARCHAR},
      </if>
      <if test="uid != null">
        uid = #{uid,jdbcType=INTEGER},
      </if>
      <if test="cimage != null">
        cimage = #{cimage,jdbcType=VARCHAR},
      </if>
      <if test="ctel != null">
        ctel = #{ctel,jdbcType=VARCHAR},
      </if>
      <if test="cqqorweixin != null">
        cqqorweixin = #{cqqorweixin,jdbcType=VARCHAR},
      </if>
      <if test="cclassification != null">
        cclassification = #{cclassification,jdbcType=VARCHAR},
      </if>
      <if test="truename != null">
        truename = #{truename,jdbcType=VARCHAR},
      </if>
      <if test="cschool != null">
        cschool = #{cschool,jdbcType=VARCHAR},
      </if>
      <if test="oid != null">
        oid = #{oid,jdbcType=INTEGER},
      </if>
      <if test="clicks != null">
        clicks = #{clicks,jdbcType=INTEGER},
      </if>
      <if test="saleid != null">
        saleid = #{saleid,jdbcType=INTEGER},
      </if>
    </set>
    where cid = #{cid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.etc.entity.Commodity">
    update commodity
    set cinfo = #{cinfo,jdbcType=VARCHAR},
      cprice = #{cprice,jdbcType=INTEGER},
      cname = #{cname,jdbcType=VARCHAR},
      cnum = #{cnum,jdbcType=INTEGER},
      crelease = #{crelease,jdbcType=TIMESTAMP},
      ccertification = #{ccertification,jdbcType=VARCHAR},
      clocation = #{clocation,jdbcType=VARCHAR},
      uid = #{uid,jdbcType=INTEGER},
      cimage = #{cimage,jdbcType=VARCHAR},
      ctel = #{ctel,jdbcType=VARCHAR},
      cqqorweixin = #{cqqorweixin,jdbcType=VARCHAR},
      cclassification = #{cclassification,jdbcType=VARCHAR},
      truename = #{truename,jdbcType=VARCHAR},
      cschool = #{cschool,jdbcType=VARCHAR},
      oid = #{oid,jdbcType=INTEGER},
      clicks = #{clicks,jdbcType=INTEGER},
      saleid = #{saleid,jdbcType=INTEGER}
    where cid = #{cid,jdbcType=INTEGER}
  </update>
  
  
<!--展示所有商品  -->
  <select id="showgood" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity
     </select>
  <!-- 商品分类查询 -->

   <select id="flgoods" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity where cclassification=#{cclassification}
  </select>
  <!-- 价格升序 -->
   <select id="sortpriceup" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity 
   
        
      <if test="cclassification != null">
         where cclassification=#{cclassification}
      </if>
     order by cprice asc
  </select>
  
  <!-- 价格降序 -->
  <select id="sortpricedown" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity 
 
         <if test="cclassification != null">
         where cclassification=#{cclassification}
      </if>
    
     order by cprice desc
  </select>
  
  <!-- 时间降序 -->
  <select id="sorttimedown" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity 
   
        <if test="cclassification != null">
         where cclassification=#{cclassification}
      </if>
     
     order by crelease desc
  </select>
  
  <!-- 时间升序 -->
  <select id="sorttimeup" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity
    
         <if test="cclassification != null">
         where cclassification=#{cclassification}
      </if> 
      
    order by crelease  asc
  </select>
  
 <update id="useraddgoods" parameterType="com.etc.entity.Commodity">
         <selectKey keyProperty="cid" order="AFTER" resultType="java.lang.Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
 update commodity set uid=#{uid} where 
 cid = #{cid}
 </update>
 
 <select id="oneusergood" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity where uid =#{uid}
  </select>
 
 <select id="allprice" resultType="java.lang.Integer">
  select 
    
    IFNULL(sum(cprice),0)AS price
    from commodity where uid =#{uid}
  </select>

 
 <select id="onegoods" resultMap="BaseResultMap">
  select 
    <include refid="Base_Column_List" />
    from commodity where cid = #{cid}
  </select>
 
 <update id="delg" parameterType="com.etc.entity.Commodity">
 update commodity set uid = null where cid =#{cid}
 </update>
  
  
  <update id="ordergood" parameterType="com.etc.entity.Commodity">
 update commodity set oid = #{oid} where uid =#{uid}
 </update>
 
  <update id="removecart" parameterType="com.etc.entity.Commodity">
 update commodity set uid = null where uid =#{uid}
 </update>
 
  <select id="allorderprice" resultType="java.lang.Integer">
  select 
     IFNULL(sum(cprice),0)AS price
    from commodity where oid =#{oid}
  </select>
  
   <select id="goodnum" resultType="java.lang.Integer" parameterType="com.etc.entity.Commodity">
  select count(*) from commodity 
      where cclassification=#{cclassification}
  
  </select>
  
   <select id="showsale" resultType="com.etc.entity.Commodity" parameterType="com.etc.entity.Commodity">
   select 
    <include refid="Base_Column_List" />
    from commodity where saleid = #{saleid}
  
  </select>
  
  <select id="showordergood" resultType="com.etc.entity.Commodity" parameterType="com.etc.entity.Commodity">
  select 
      <include refid="Base_Column_List" />
    from commodity where oid =#{oid}
  </select>
</mapper>